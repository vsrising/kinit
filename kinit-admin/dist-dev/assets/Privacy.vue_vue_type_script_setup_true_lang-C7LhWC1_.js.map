{"version":3,"file":"Privacy.vue_vue_type_script_setup_true_lang-C7LhWC1_.js","sources":["../../src/views/Vadmin/System/Settings/components/Privacy.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { getSystemSettingsApi, putSystemSettingsApi } from '@/api/vadmin/system/settings'\nimport { propTypes } from '@/utils/propTypes'\nimport { Editor, EditorExpose } from '@/components/Editor'\nimport { ref } from 'vue'\nimport { ElMessage } from 'element-plus'\n\nconst props = defineProps({\n  tabId: propTypes.number\n})\n\nconst editorRef = ref<typeof Editor & EditorExpose>()\n\nconst defaultHtml = ref('')\n\nconst getData = async () => {\n  const res = await getSystemSettingsApi({ tab_id: props.tabId })\n  if (res) {\n    defaultHtml.value = res.data.web_privacy || ''\n  }\n}\n\nconst loading = ref(false)\n\nconst save = async () => {\n  loading.value = true\n  try {\n    const res = await putSystemSettingsApi({ web_privacy: defaultHtml.value })\n    if (res) {\n      getData()\n      return ElMessage.success('更新成功')\n    }\n  } finally {\n    loading.value = false\n  }\n}\n\nconst editorConfig = {\n  customAlert: (s: string, t: string) => {\n    switch (t) {\n      case 'success':\n        ElMessage.success(s)\n        break\n      case 'info':\n        ElMessage.info(s)\n        break\n      case 'warning':\n        ElMessage.warning(s)\n        break\n      case 'error':\n        ElMessage.error(s)\n        break\n      default:\n        ElMessage.info(s)\n        break\n    }\n  },\n  autoFocus: true,\n  scroll: true,\n  readOnly: false,\n  uploadImgShowBase64: true\n}\n\ngetData()\n</script>\n\n<template>\n  <Editor\n    v-model=\"defaultHtml\"\n    ref=\"editorRef\"\n    editorId=\"web_privacy\"\n    :editorConfig=\"editorConfig\"\n  />\n  <div class=\"mt-10px\" style=\"float: right\">\n    <BaseButton :loading=\"loading\" type=\"primary\" @click=\"save\">立即保存</BaseButton>\n  </div>\n</template>\n\n<style scoped lang=\"less\"></style>\n"],"names":["props","__props","editorRef","ref","defaultHtml","getData","__async","res","getSystemSettingsApi","loading","save","putSystemSettingsApi","ElMessage","editorConfig","s","t"],"mappings":"8lBAOA,MAAMA,EAAQC,EAIRC,EAAYC,IAEZC,EAAcD,EAAI,EAAE,EAEpBE,EAAU,IAAYC,EAAA,sBAC1B,MAAMC,EAAM,MAAMC,EAAqB,CAAE,OAAQR,EAAM,MAAO,EAC1DO,IACUH,EAAA,MAAQG,EAAI,KAAK,aAAe,GAC9C,GAGIE,EAAUN,EAAI,EAAK,EAEnBO,EAAO,IAAYJ,EAAA,sBACvBG,EAAQ,MAAQ,GACZ,GAAA,CAEF,GADY,MAAME,EAAqB,CAAE,YAAaP,EAAY,MAAO,EAE/D,OAAAC,IACDO,EAAU,QAAQ,MAAM,CACjC,QACA,CACAH,EAAQ,MAAQ,EAClB,CAAA,GAGII,EAAe,CACnB,YAAa,CAACC,EAAWC,IAAc,CACrC,OAAQA,EAAG,CACT,IAAK,UACHH,EAAU,QAAQE,CAAC,EACnB,MACF,IAAK,OACHF,EAAU,KAAKE,CAAC,EAChB,MACF,IAAK,UACHF,EAAU,QAAQE,CAAC,EACnB,MACF,IAAK,QACHF,EAAU,MAAME,CAAC,EACjB,MACF,QACEF,EAAU,KAAKE,CAAC,EAChB,KACJ,CACF,EACA,UAAW,GACX,OAAQ,GACR,SAAU,GACV,oBAAqB,EAAA,EAGf,OAAAT"}