{"version":3,"mappings":"ijBAuBA,MAAMA,EAAa,qFAhBb,MAAE,aAAAC,GAAiBC,IAEnBC,EAAYF,EAAa,cAAc,EAEvCG,EAAOC,EAEPC,EAAMC,EAAQ,CAAE,KAAM,wBAAyB,MAAO,UAAW,EAEjEC,EAAeD,EAAQ,CAAE,KAAM,kCAAmC,MAAO,UAAW,EAEpFE,EAAWC,IAGXC,EAASC,EAAIH,EAAS,SAAS,EAK/BI,EAAeC,GAAiB,CACpCL,EAAS,UAAUK,CAAG,EACtBV,EAAK,SAAUU,CAAG,oVCvBdC,EAAmBC,GAAuB,CAC9C,MAAMC,EAAcC,IAEhBC,EAAK,OAAS,SAChBA,EAAK,OAAO,OAASH,EAEnBG,EAAK,OAAO,OAAe,MAAQH,EAEvCC,EAAY,iBAAiB,CAC3B,KAAMD,CAAA,CACP,EACDI,EAAgBJ,CAAM,CACxB,EAEaK,EAAY,KAahB,CACL,aAX0BL,GAAuBM,EAAA,wBACjD,MAAMC,EAAaJ,EAAK,OAElBK,EAAa,MAAMC,yLAAA,iBAAAT,CAAA,OAEdO,EAAA,iBAAiBP,EAAQQ,EAAW,OAAO,EAEtDT,EAAgBC,CAAM,GAItB,yECxBE,MAAE,aAAAf,GAAiBC,IAEnBC,EAAYF,EAAa,iBAAiB,EAM1CgB,EAAcS,IAEdC,EAAUC,EAAS,IAAMX,EAAY,YAAY,EAEjDY,EAAcD,EAAS,IAAMX,EAAY,gBAAgB,EAEzDa,EAAWC,GAAqB,CAChC,GAAAA,IAASC,EAAMH,CAAW,EAAE,KAAM,OAEtC,OAAO,SAAS,SAChBZ,EAAY,iBAAiB,CAC3B,KAAAc,CAAA,CACD,EACK,MAAE,aAAAE,GAAiBZ,IACzBY,EAAaF,CAAI","names":["blackColor","getPrefixCls","useDesign","prefixCls","emit","__emit","Sun","useIcon","CrescentMoon","appStore","useAppStore","isDark","ref","themeChange","val","setI18nLanguage","locale","localeStore","useLocaleStoreWithOut","i18n","setHtmlPageLang","useLocale","__async","globalI18n","langModule","__variableDynamicImportRuntimeHelper","useLocaleStore","langMap","computed","currentLang","setLang","lang","unref","changeLocale"],"sources":["../../src/components/ThemeSwitch/src/ThemeSwitch.vue","../../src/hooks/web/useLocale.ts","../../src/components/LocaleDropdown/src/LocaleDropdown.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport { ref } from 'vue'\nimport { useAppStore } from '@/store/modules/app'\nimport { ElSwitch } from 'element-plus'\nimport { useIcon } from '@/hooks/web/useIcon'\nimport { useDesign } from '@/hooks/web/useDesign'\n\nconst { getPrefixCls } = useDesign()\n\nconst prefixCls = getPrefixCls('theme-switch')\n\nconst emit = defineEmits(['change'])\n\nconst Sun = useIcon({ icon: 'emojione-monotone:sun', color: '#fde047' })\n\nconst CrescentMoon = useIcon({ icon: 'emojione-monotone:crescent-moon', color: '#fde047' })\n\nconst appStore = useAppStore()\n\n// 初始化获取是否是暗黑主题\nconst isDark = ref(appStore.getIsDark)\n\n// 设置switch的背景颜色\nconst blackColor = 'var(--el-color-black)'\n\nconst themeChange = (val: boolean) => {\n  appStore.setIsDark(val)\n  emit('change', val)\n}\n</script>\n\n<template>\n  <ElSwitch\n    :class=\"prefixCls\"\n    v-model=\"isDark\"\n    inline-prompt\n    :border-color=\"blackColor\"\n    :inactive-color=\"blackColor\"\n    :active-color=\"blackColor\"\n    :active-icon=\"Sun\"\n    :inactive-icon=\"CrescentMoon\"\n    @change=\"themeChange\"\n  />\n</template>\n\n<style lang=\"less\" scoped>\n:deep(.el-switch__core .el-switch__inner .is-icon) {\n  overflow: visible;\n}\n</style>\n","import { i18n } from '@/plugins/vueI18n'\nimport { useLocaleStoreWithOut } from '@/store/modules/locale'\nimport { setHtmlPageLang } from '@/plugins/vueI18n/helper'\n\nconst setI18nLanguage = (locale: LocaleType) => {\n  const localeStore = useLocaleStoreWithOut()\n\n  if (i18n.mode === 'legacy') {\n    i18n.global.locale = locale\n  } else {\n    ;(i18n.global.locale as any).value = locale\n  }\n  localeStore.setCurrentLocale({\n    lang: locale\n  })\n  setHtmlPageLang(locale)\n}\n\nexport const useLocale = () => {\n  // Switching the language will change the locale of useI18n\n  // And submit to configuration modification\n  const changeLocale = async (locale: LocaleType) => {\n    const globalI18n = i18n.global\n\n    const langModule = await import(`../../locales/${locale}.ts`)\n\n    globalI18n.setLocaleMessage(locale, langModule.default)\n\n    setI18nLanguage(locale)\n  }\n\n  return {\n    changeLocale\n  }\n}\n","<script setup lang=\"ts\">\nimport { computed, unref } from 'vue'\nimport { ElDropdown, ElDropdownMenu, ElDropdownItem } from 'element-plus'\nimport { useLocaleStore } from '@/store/modules/locale'\nimport { useLocale } from '@/hooks/web/useLocale'\nimport { propTypes } from '@/utils/propTypes'\nimport { useDesign } from '@/hooks/web/useDesign'\n\nconst { getPrefixCls } = useDesign()\n\nconst prefixCls = getPrefixCls('locale-dropdown')\n\ndefineProps({\n  color: propTypes.string.def('')\n})\n\nconst localeStore = useLocaleStore()\n\nconst langMap = computed(() => localeStore.getLocaleMap)\n\nconst currentLang = computed(() => localeStore.getCurrentLocale)\n\nconst setLang = (lang: LocaleType) => {\n  if (lang === unref(currentLang).lang) return\n  // 需要重新加载页面让整个语言多初始化\n  window.location.reload()\n  localeStore.setCurrentLocale({\n    lang\n  })\n  const { changeLocale } = useLocale()\n  changeLocale(lang)\n}\n</script>\n\n<template>\n  <ElDropdown :class=\"prefixCls\" trigger=\"click\" @command=\"setLang\">\n    <Icon\n      :size=\"18\"\n      icon=\"ion:language-sharp\"\n      class=\"cursor-pointer !p-0\"\n      :class=\"$attrs.class\"\n      :color=\"color\"\n    />\n    <template #dropdown>\n      <ElDropdownMenu>\n        <ElDropdownItem v-for=\"item in langMap\" :key=\"item.lang\" :command=\"item.lang\">\n          {{ item.name }}\n        </ElDropdownItem>\n      </ElDropdownMenu>\n    </template>\n  </ElDropdown>\n</template>\n"],"file":"assets/LocaleDropdown.vue_vue_type_script_setup_true_lang-x-B_WbJX.js"}