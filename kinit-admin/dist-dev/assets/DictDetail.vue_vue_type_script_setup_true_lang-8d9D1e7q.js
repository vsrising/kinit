var j=Object.defineProperty;var x=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var I=(n,s,t)=>s in n?j(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t,P=(n,s)=>{for(var t in s||(s={}))G.call(s,t)&&I(n,t,s[t]);if(x)for(var t of x(s))H.call(s,t)&&I(n,t,s[t]);return n};var p=(n,s,t)=>new Promise((h,m)=>{var D=r=>{try{v(t.next(r))}catch(c){m(c)}},k=r=>{try{v(t.throw(r))}catch(c){m(c)}},v=r=>r.done?h(r.value):Promise.resolve(r.value).then(D,k);v((t=t.apply(n,s)).next())});import{a as K,b as Q,d as W,c as X,p as Y}from"./dict-vhQapUcV.js";import{u as Z,_ as ee}from"./Table.vue_vue_type_script_lang-mknq5iMW.js";import{i as ae,d as te,q as w}from"./index-E_cr-WWq.js";import{_ as le}from"./Search.vue_vue_type_script_setup_true_lang-FyVOhxsu.js";import{_ as se}from"./ContentWrap.vue_vue_type_script_setup_true_lang-M_zuHec9.js";import{_ as ie}from"./Write.vue_vue_type_script_setup_true_lang-iR1eb7fS.js";import{_ as oe}from"./Dialog.vue_vue_type_style_index_0_lang-ZHiEjFP2.js";import{z as ne,m as re,g as de}from"./element-plus-LfFKO5To.js";import{l as ue,J as $,O as i,P as S,V as b,a as d,b as ce,m as fe,p as pe,R as u,u as a,B as U,U as E}from"./vue-chunks-NBL-ZipP.js";const Re=ue({__name:"DictDetail",props:{dictTypeId:ae.number.def(void 0)},setup(n){const s=n,{t}=te(),{tableRegister:h,tableState:m,tableMethods:D}=Z({fetchDataApi:()=>p(this,null,function*(){const{pageSize:l,currentPage:e}=m,o=yield Q(P({page:a(e),limit:a(l),dict_type_id:s.dictTypeId},a(T)));return{list:o.data||[],total:o.count||0}}),fetchDelApi:l=>p(this,null,function*(){return(yield W(l)).code===200})}),{dataList:k,loading:v,total:r,pageSize:c,currentPage:y}=m,{getList:g,delList:B}=D,F=$([{field:"id",label:"字典编号",show:!1,disabled:!1},{field:"label",label:"字典标签",show:!0,disabled:!0},{field:"value",label:"字典键值",show:!0},{field:"order",label:"字典排序",show:!0},{field:"disabled",label:"是否禁用",show:!0,slots:{default:l=>{const e=l.row;return i(S,null,[i(ne,{modelValue:!e.disabled,disabled:!0},null)])}}},{field:"remark",label:"备注",show:!1},{field:"create_datetime",label:"创建时间",show:!1},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:l=>{const e=l.row;return i(S,null,[i(w,{type:"primary",link:!0,size:"small",onClick:()=>J(e)},{default:()=>[b("编辑")]}),i(w,{type:"danger",loading:R.value,link:!0,size:"small",onClick:()=>q(e)},{default:()=>[b("删除")]})])}}}]),N=$([{field:"label",label:"字典标签",component:"Input",componentProps:{clearable:!1}}]),T=d({}),z=l=>{y.value=1,T.value=l,g()},R=d(!1),q=l=>p(this,null,function*(){R.value=!0,yield B(!0,[l.id]).finally(()=>{R.value=!1})}),f=d(!1),A=d(""),C=d(),_=d(""),V=d(),L=d(!1),J=l=>p(this,null,function*(){const e=yield K(l.id);e&&(A.value="编辑字段元素",_.value="edit",C.value=e.data,f.value=!0)}),M=()=>{A.value="新增字段元素",_.value="add",C.value=void 0,f.value=!0},O=()=>p(this,null,function*(){const l=a(V),e=yield l==null?void 0:l.submit();if(e){L.value=!0;try{const o=d({});_.value==="add"?(o.value=yield X(e),o.value&&(f.value=!1,g())):_.value==="edit"&&(o.value=yield Y(e),o.value&&(f.value=!1,g()))}finally{L.value=!1}}});return ce(()=>s.dictTypeId,()=>{g()},{deep:!0}),(l,e)=>(fe(),pe(S,null,[i(a(se),null,{default:u(()=>[i(a(le),{schema:N,onReset:z,onSearch:z},null,8,["schema"]),i(a(ee),{"current-page":a(y),"onUpdate:currentPage":e[0]||(e[0]=o=>U(y)?y.value=o:null),"page-size":a(c),"onUpdate:pageSize":e[1]||(e[1]=o=>U(c)?c.value=o:null),showAction:"",activeUID:"detail",columns:F,"default-expand-all":"","node-key":"id",data:a(k),loading:a(v),pagination:{total:a(r)},onRegister:a(h),onRefresh:a(g)},{toolbar:u(()=>[i(a(re),{gutter:10},{default:u(()=>[i(a(de),{span:1.5},{default:u(()=>[i(a(w),{type:"primary",onClick:M},{default:u(()=>[b("新增字典元素")]),_:1})]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}),i(a(oe),{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),title:A.value,height:650},{footer:u(()=>[i(a(w),{type:"primary",loading:L.value,onClick:O},{default:u(()=>[b(E(a(t)("exampleDemo.save")),1)]),_:1},8,["loading"]),i(a(w),{onClick:e[2]||(e[2]=o=>f.value=!1)},{default:u(()=>[b(E(a(t)("dialogDemo.close")),1)]),_:1})]),default:u(()=>[i(ie,{ref_key:"writeRef",ref:V,"current-row":C.value,"dict-type-id":n.dictTypeId},null,8,["current-row","dict-type-id"])]),_:1},8,["modelValue","title"])],64))}});export{Re as _};
//# sourceMappingURL=DictDetail.vue_vue_type_script_setup_true_lang-8d9D1e7q.js.map
