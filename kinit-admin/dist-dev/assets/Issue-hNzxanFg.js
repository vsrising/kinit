var E=Object.defineProperty;var P=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var k=(i,a,e)=>a in i?E(i,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[a]=e,z=(i,a)=>{for(var e in a||(a={}))F.call(a,e)&&k(i,e,a[e]);if(P)for(var e of P(a))N.call(a,e)&&k(i,e,a[e]);return i};var c=(i,a,e)=>new Promise((m,f)=>{var h=o=>{try{p(e.next(o))}catch(r){f(r)}},g=o=>{try{p(e.throw(o))}catch(r){f(r)}},p=o=>o.done?m(o.value):Promise.resolve(o.value).then(h,g);p((e=e.apply(i,a)).next())});import{g as T,d as U}from"./issue-HUI4WBt7.js";import{u as j,_ as q}from"./Table.vue_vue_type_script_lang-mknq5iMW.js";import{_ as H}from"./Search.vue_vue_type_script_setup_true_lang-FyVOhxsu.js";import{_ as J}from"./ContentWrap.vue_vue_type_script_setup_true_lang-M_zuHec9.js";import{u as M}from"./dict-5fAUqSge.js";import{l as W,aC as G,a as _,J as C,O as n,P as A,V as b,m as K,W as Q,R as d,u as t,B as L}from"./vue-chunks-NBL-ZipP.js";import{q as v}from"./index-E_cr-WWq.js";import{z as X,m as Y,g as Z}from"./element-plus-LfFKO5To.js";import"./useForm-agan0gLz.js";import"./style.css_vue_type_style_index_0_src_true_lang-vVOIijJh.js";import"./wang-editor-izIlk5n1.js";import"./_Uint8Array-x8CL7VG0.js";import"./useIcon-gh8Uv9vA.js";import"./dict-vhQapUcV.js";const ge=W({name:"HelpIssue",__name:"Issue",setup(i){const{push:a}=G(),{tableRegister:e,tableState:m,tableMethods:f}=j({fetchDataApi:()=>c(this,null,function*(){const{pageSize:s,currentPage:l}=m,u=yield T(z({page:t(l),limit:t(s)},t(S)));return{list:u.data||[],total:u.count||0}}),fetchDelApi:s=>c(this,null,function*(){return(yield U(s)).code===200})}),{dataList:h,loading:g,total:p,pageSize:o,currentPage:r}=m,{getList:y,delList:O}=f,x=_([]);c(this,null,function*(){const l=yield M().getDictObj(["sys_vadmin_platform"]);x.value=l.sys_vadmin_platform});const D=C([{field:"id",label:"编号",show:!0,disabled:!0,width:"120px"},{field:"category.name",label:"类别名称",width:"200px",show:!0,disabled:!0},{field:"title",label:"标题",show:!0},{field:"view_number",label:"查看次数",show:!0,width:"100px"},{field:"is_active",label:"是否可见",show:!0,width:"100px",slots:{default:s=>{const l=s.row;return n(A,null,[n(X,{modelValue:l.is_active,disabled:!0},null)])}}},{field:"create_datetime",label:"创建时间",show:!0,width:"200px",sortable:!0},{field:"create_user.name",label:"创建人",show:!0,width:"100px"},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:s=>{const l=s.row;return n(A,null,[n(v,{type:"primary",link:!0,size:"small",onClick:()=>V(l)},{default:()=>[b("编辑")]}),n(v,{type:"danger",loading:w.value,link:!0,size:"small",onClick:()=>$(l)},{default:()=>[b("删除")]})])}}}]),I=C([{field:"name",label:"类别名称",component:"Input",componentProps:{clearable:!0,style:{width:"214px"}}},{field:"platform",label:"登录平台",component:"Select",componentProps:{style:{width:"214px"},options:x.value}},{field:"is_active",label:"是否可见",component:"Select",componentProps:{style:{width:"214px"},options:[{label:"可见",value:!0},{label:"不可见",value:!1}]}}]),S=_({}),R=s=>{r.value=1,S.value=s,y()},w=_(!1),$=s=>c(this,null,function*(){w.value=!0,yield O(!0,[s.id]).finally(()=>{w.value=!1})}),V=s=>c(this,null,function*(){a(`/help/issue/form?id=${s.id}`)}),B=()=>{a("/help/issue/form")};return(s,l)=>(K(),Q(t(J),null,{default:d(()=>[n(t(H),{schema:I,onReset:R,onSearch:R},null,8,["schema"]),n(t(q),{"current-page":t(r),"onUpdate:currentPage":l[0]||(l[0]=u=>L(r)?r.value=u:null),"page-size":t(o),"onUpdate:pageSize":l[1]||(l[1]=u=>L(o)?o.value=u:null),showAction:"",columns:D,"default-expand-all":"","node-key":"id",data:t(h),loading:t(g),pagination:{total:t(p)},onRegister:t(e),onRefresh:t(y)},{toolbar:d(()=>[n(t(Y),{gutter:10},{default:d(()=>[n(t(Z),{span:1.5},{default:d(()=>[n(t(v),{type:"primary",onClick:B},{default:d(()=>[b("新增常见问题")]),_:1})]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}))}});export{ge as default};
//# sourceMappingURL=Issue-hNzxanFg.js.map
