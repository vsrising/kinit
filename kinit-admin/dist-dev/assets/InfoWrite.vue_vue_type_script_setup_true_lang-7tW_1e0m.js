var f=(u,s,o)=>new Promise((a,n)=>{var i=e=>{try{r(o.next(e))}catch(t){n(t)}},p=e=>{try{r(o.throw(e))}catch(t){n(t)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(i,p);r((o=o.apply(u,s)).next())});import{u as _,F as w}from"./useForm-agan0gLz.js";import{u as I}from"./useValidator-b4d-vg8t.js";import{u as k,q as y,s as F}from"./index-E_cr-WWq.js";import{b as g}from"./element-plus-LfFKO5To.js";import{l as x,J as U,O as m,V,P as D,a as R,m as q,W as B,u as h}from"./vue-chunks-NBL-ZipP.js";const W=x({__name:"InfoWrite",setup(u){const{required:s,isTelephone:o}=I(),a=k(),n=U([{field:"name",label:"用户名称",component:"Input",colProps:{span:24},formItemProps:{rules:[s()]},componentProps:{style:{width:"50%"}}},{field:"nickname",label:"用户昵称",component:"Input",colProps:{span:24},componentProps:{style:{width:"50%"}}},{field:"telephone",label:"手机号",component:"Input",colProps:{span:24},formItemProps:{rules:[s(),{validator:o,trigger:"blur"}]},componentProps:{style:{width:"50%"},maxlength:11}},{field:"gender",label:"性别",colProps:{span:24},formItemProps:{rules:[s()]},component:"RadioGroup",componentProps:{options:[{label:"男",value:"0"},{label:"女",value:"1"}]}},{field:"save",colProps:{span:24},formItemProps:{slots:{default:()=>m(D,null,[m("div",{class:"w-[50%]"},[m(y,{loading:c.value,type:"primary",class:"w-[100%]",onClick:v},{default:()=>[V("保存")]})])])}}}]),{formRegister:i,formMethods:p}=_(),{setValues:r,getFormData:e,getElFormExpose:t}=p;r(a.getUser);const c=R(!1),v=()=>f(this,null,function*(){if(a.getUser.id===1)return g.warning("编辑账号为演示账号，无权限操作！");const l=yield t();if(yield l==null?void 0:l.validate()){c.value=!0;const b=yield e();try{const d=yield F(b);d&&(a.updateUser(d.data),g.success("保存成功"))}finally{c.value=!1}}});return(l,P)=>(q(),B(h(w),{onRegister:h(i),schema:n,"hide-required-asterisk":"",class:"dark:border-1 dark:border-[var(--el-border-color)] dark:border-solid"},null,8,["onRegister","schema"]))}});export{W as _};
//# sourceMappingURL=InfoWrite.vue_vue_type_script_setup_true_lang-7tW_1e0m.js.map
